{
	"info": {
		"_postman_id": "c19c740e-4531-4cc2-98a5-b4f97ff4ac59",
		"name": "API KEYVALUE TEST",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "API-DOCS",
			"item": [
				{
					"name": "CHECK API-DOCS",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "01067e84-09ab-46b6-980c-aecb90b62109",
								"exec": [
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{keyvalueapi_hostname}}/api-docs",
							"protocol": "http",
							"host": [
								"{{keyvalueapi_hostname}}"
							],
							"path": [
								"api-docs"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "CREATING OBJECTS",
			"item": [
				{
					"name": "CREATE OBJECT",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "da78678e-c8c7-4056-8515-477ab6f96722",
								"exec": [
									"pm.test(\"Status code is 201\", function () { pm.response.to.have.status(201); });",
									"const response = pm.response.json();",
									"pm.globals.set(\"CREATEDOBJECTTIMESTAMP\", response.timestamp);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "80701c3e-81d2-4734-9f60-f998929093b7",
								"exec": [
									"const testrandomnumber = Math.floor((Math.random() * 10000) + 1);",
									"pm.globals.set(\"CREATEDOBJECTKEY\", \"SECRET\" + testrandomnumber);",
									"console.log(testrandomnumber);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"{{CREATEDOBJECTKEY}}\": \"SUCCESS_IS_RESPECT\"\r\n}"
						},
						"url": {
							"raw": "http://{{keyvalueapi_hostname}}/object",
							"protocol": "http",
							"host": [
								"{{keyvalueapi_hostname}}"
							],
							"path": [
								"object"
							]
						}
					},
					"response": []
				},
				{
					"name": "UPDATE OBJECT",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "da78678e-c8c7-4056-8515-477ab6f96722",
								"exec": [
									"const response = pm.response.json();",
									"pm.globals.set(\"CREATEDOBJECTLATER\", response.value);",
									"pm.test(\"Updated value\", function () {",
									"    pm.expect(response.value).to.eql(\"{{CREATEDOBJECTLATERVALUE}}\");",
									"});",
									"pm.globals.set(\"CREATEDOBJECTTIMESTAMPLATER\", response.timestamp);",
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "a8e6317e-d100-48e9-9533-a59083a92c68",
								"exec": [
									"pm.globals.set(\"CREATEDOBJECTLATERVALUE\", \"SOME OTHER VALUE\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "JWT {{organization_login}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"{{CREATEDOBJECTKEY}}\": \"{{CREATEDOBJECTLATERVALUE}}\"\r\n}"
						},
						"url": {
							"raw": "http://{{keyvalueapi_hostname}}/object",
							"protocol": "http",
							"host": [
								"{{keyvalueapi_hostname}}"
							],
							"path": [
								"object"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "GETTING OBJECTS",
			"item": [
				{
					"name": "READ OBJECT",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e0c615ac-4c37-4ba8-8646-26422bd754da",
								"exec": [
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{keyvalueapi_hostname}}/object/:mykey",
							"protocol": "http",
							"host": [
								"{{keyvalueapi_hostname}}"
							],
							"path": [
								"object",
								":mykey"
							],
							"variable": [
								{
									"key": "mykey",
									"value": "{{CREATEDOBJECTKEY}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "READ EARLIER OBJECT",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e0c615ac-4c37-4ba8-8646-26422bd754da",
								"exec": [
									"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://{{keyvalueapi_hostname}}/object/:mykey?timestamp={{CREATEDOBJECTTIMESTAMP}}",
							"protocol": "http",
							"host": [
								"{{keyvalueapi_hostname}}"
							],
							"path": [
								"object",
								":mykey"
							],
							"query": [
								{
									"key": "timestamp",
									"value": "{{CREATEDOBJECTTIMESTAMP}}"
								}
							],
							"variable": [
								{
									"key": "mykey",
									"value": "{{CREATEDOBJECTKEY}}"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	]
}